{"version":3,"file":"test.js","names":["chai","use","chatHttp","expect","describe","it","done","book","title","price","description","request","app","post","set","send","end","err","res","status","to","equal","body","data","include","id","get","should","have","property","bookId","eql","updatedBook","put"],"sources":["../../api/test/test.js"],"sourcesContent":["import chai from 'chai';\r\nimport chatHttp from 'chai-http';\r\nimport 'chai/register-should';\r\nimport app from '../index';\r\n\r\nchai.use(chatHttp);\r\nconst { expect } = chai;\r\n\r\ndescribe('Testing the book endpoint: ', () => {\r\n\tit('It should create a book', (done) => {\r\n\t\tconst book = {\r\n\t\t\ttitle: 'First awesome book',\r\n\t\t\tprice: 'Rp. 250.000',\r\n\t\t\tdescription: 'This is the awesome book from testing'\r\n\t\t};\r\n\r\n\t\tchai.request(app)\r\n\t\t\t.post('/api/v1/books')\r\n\t\t\t.set('Accept', 'application/json')\r\n\t\t\t.send(book)\r\n\t\t\t.end((err, res) => {\r\n\t\t\t\texpect(res.status).to.equal(201);\r\n\t\t\t\texpect(res.body.data).to.include({\r\n\t\t\t\t\tid: 1,\r\n\t\t\t\t\ttitle: book.title,\r\n\t\t\t\t\tprice: book.price,\r\n\t\t\t\t\tdescription: book.description\r\n\t\t\t\t});\r\n\t\t\t\tdone();\r\n\t\t\t});\r\n\t});\r\n\r\n\tit('It should get all books', (done) => {\r\n\t\tchai.request(app)\r\n\t\t\t.get('/api/v1/books')\r\n\t\t\t.set('Accept', 'application/json')\r\n\t\t\t.end((err, res) => {\r\n\t\t\t\texpect(res.status).to.equal(200);\r\n\t\t\t\tres.body.data[0].should.have.property('id');\r\n\t\t\t\tres.body.data[0].should.have.property('title');\r\n\t\t\t\tres.body.data[0].should.have.property('price');\r\n\t\t\t\tres.body.data[0].should.have.property('description');\r\n\t\t\t\tdone();\r\n\t\t\t});\r\n\t});\r\n\r\n\tit('It should get a books', (done) => {\r\n\t\tconst bookId = 1;\r\n\t\tchai.request(app)\r\n\t\t\t.get(`/api/v1/books/${bookId}`)\r\n\t\t\t.set('Accept', 'application/json')\r\n\t\t\t.end((err, res) => {\r\n\t\t\t\texpect(res.status).to.equal(200);\r\n\t\t\t\tres.body.data.should.have.property('id');\r\n\t\t\t\tres.body.data.should.have.property('title');\r\n\t\t\t\tres.body.data.should.have.property('price');\r\n\t\t\t\tres.body.data.should.have.property('description');\r\n\t\t\t\tdone();\r\n\t\t\t});\r\n\t});\r\n\r\n\tit('It should not get a particular book with invalid id', (done) => {\r\n\t\tconst bookId = 9999;\r\n\t\tchai.request(app)\r\n\t\t\t.get(`/api/v1/books/${bookId}`)\r\n\t\t\t.set('Accept', 'application/json')\r\n\t\t\t.end((err, res) => {\r\n\t\t\t\texpect(res.status).to.equal(404);\r\n\t\t\t\tres.body.should.have.property('message').eql(`Cannot find book with the id: ${bookId}`);\r\n\t\t\t\tdone();\r\n\t\t\t});\r\n\t});\r\n\r\n\tit('It should not get a particular book with non-numeric id', (done) => {\r\n\t\tconst bookId = 'aaaa';\r\n\t\tchai.request(app)\r\n\t\t\t.get(`/api/v1/books/${bookId}`)\r\n\t\t\t.set('Accept', 'application/json')\r\n\t\t\t.end((err, res) => {\r\n\t\t\t\texpect(res.status).to.equal(400);\r\n\t\t\t\tres.body.should.have.property('message').eql('Please input a valid numeric value.');\r\n\t\t\t\tdone();\r\n\t\t\t});\r\n\t});\r\n\r\n\tit('It should update a book', (done) => {\r\n\t\tconst bookId = 1;\r\n\t\tconst updatedBook = {\r\n\t\t\tid: bookId,\r\n\t\t\ttitle: 'Updated book title',\r\n\t\t\tprice: 'Rp. 500.000',\r\n\t\t\tdescription: 'This is updated book'\r\n\t\t};\r\n\t\tchai.request(app)\r\n\t\t\t.put(`/api/v1/books/${bookId}`)\r\n\t\t\t.set('Accept', 'application/json')\r\n\t\t\t.send(updatedBook)\r\n\t\t\t.end((err, res) => {\r\n\t\t\t\texpect(res.status).to.equal(200);\r\n\t\t\t\texpect(res.body.data.id).equal(updatedBook.id);\r\n\t\t\t\texpect(res.body.data.title).equal(updatedBook.title);\r\n\t\t\t\texpect(res.body.data.price).equal(updatedBook.price);\r\n\t\t\t\texpect(res.body.data.description).equal(updatedBook.description);\r\n\t\t\t\tdone();\r\n\t\t\t});\r\n\t});\r\n\r\n\tit('It should not update a book with invalid id', (done) => {\r\n\t\tconst bookId = 9999;\r\n\t\tconst updatedBook = {\r\n\t\t\tid: bookId,\r\n\t\t\ttitle: 'Updated book title',\r\n\t\t\tprice: 'Rp. 500.000',\r\n\t\t\tdescription: 'This is updated book'\r\n\t\t};\r\n\t\tchai.request(app)\r\n\t\t\t.put(`/api/v1/books/${bookId}`)\r\n\t\t\t.set('Accept', 'application/json')\r\n\t\t\t.send(updatedBook)\r\n\t\t\t.end((err, res) => {\r\n\t\t\t\texpect(res.status).to.equal(404);\r\n\t\t\t\tres.body.should.have.property('message').eql(`Cannot find book with the id: ${bookId}`);\r\n\t\t\t\tdone();\r\n\t\t\t});\r\n\t});\r\n\r\n\tit('It should not update a book with non-numeric id', (done) => {\r\n\t\tconst bookId = 'aaaa';\r\n\t\tconst updatedBook = {\r\n\t\t\tid: bookId,\r\n\t\t\ttitle: 'Updated book title',\r\n\t\t\tprice: 'Rp. 500.000',\r\n\t\t\tdescription: 'This is updated book'\r\n\t\t};\r\n\t\tchai.request(app)\r\n\t\t\t.put(`/api/v1/books/${bookId}`)\r\n\t\t\t.set('Accept', 'application/json')\r\n\t\t\t.send(updatedBook)\r\n\t\t\t.end((err, res) => {\r\n\t\t\t\texpect(res.status).to.equal(400);\r\n\t\t\t\tres.body.should.have.property('message').eql('Please input a valid numeric value.');\r\n\t\t\t\tdone();\r\n\t\t\t});\r\n\t});\r\n\r\n\tit('It should delete a book', (done) => {\r\n\t\tconst bookId = 1;\r\n\t\tchai.request(app)\r\n\t\t\t.delete(`/api/v1/books/${bookId}`)\r\n\t\t\t.set('Accept', 'application/json')\r\n\t\t\t.end((err, res) => {\r\n\t\t\t\texpect(res.status).to.equal(200);\r\n\t\t\t\texpect(res.body.data).to.include({});\r\n\t\t\t\tdone();\r\n\t\t\t});\r\n\t});\r\n\r\n\tit('It should not delete a book with invalid id', (done) => {\r\n\t\tconst bookId = 9999;\r\n\t\tchai.request(app)\r\n\t\t\t.delete(`/api/v1/books/${bookId}`)\r\n\t\t\t.set('Accept', 'application/json')\r\n\t\t\t.end((err, res) => {\r\n\t\t\t\texpect(res.status).to.equal(404);\r\n\t\t\t\tres.body.should.have.property('message').eql(`Book with the id ${bookId} cannot be found`);\r\n\t\t\t\tdone();\r\n\t\t\t});\r\n\t});\r\n\r\n\tit('It should not delete a book with non-numeric id', (done) => {\r\n\t\tconst bookId = 'aaaa';\r\n\t\tchai.request(app)\r\n\t\t\t.delete(`/api/v1/books/${bookId}`)\r\n\t\t\t.set('Accept', 'application/json')\r\n\t\t\t.end((err, res) => {\r\n\t\t\t\texpect(res.status).to.equal(400);\r\n\t\t\t\tres.body.should.have.property('message').eql('Please input a valid numeric value.');\r\n\t\t\t\tdone();\r\n\t\t\t});\r\n\t});\r\n});"],"mappings":"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"}