{"version":3,"file":"index.js","names":["basename","path","__filename","env","process","NODE_ENV","config","configJson","console","log","db","sequelize","environment","Sequelize","use_env_variable","DB_NAME","DB_USER","DB_PASS","host","DB_HOST","port","DB_PORT","dialect","dialectOption","ssl","logging","database","username","password","fs","readdirSync","__dirname","filter","file","indexOf","slice","forEach","model","join","name","Object","keys","modelName","associate"],"sources":["../../../../api/server/src/models/index.js"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport Sequelize from 'sequelize';\nimport configJson from '../config/config';\n\nconst basename = path.basename(__filename);\nconst env = process.env.NODE_ENV ? process.env.NODE_ENV : 'development';\n\nconst config = configJson[env];\n\nconsole.log('this is the environment: ', env);\n\nconst db = {};\n\nlet sequelize;\nif (config.environment === 'production') {\n  sequelize = new Sequelize(\n      process.env[config.use_env_variable], config\n    );\n  sequelize = new Sequelize(\n    process.env.DB_NAME,\n    process.env.DB_USER,\n    process.env.DB_PASS, {\n      host: process.env.DB_HOST,\n      port: process.env.DB_PORT,\n      dialect: 'postgres',\n      dialectOption: {\n        ssl: true,\n        native: true\n      },\n      logging: true\n    }\n  );\n} else {\n  sequelize = new Sequelize(\n     config.database, config.username, config.password, config\n  );\n}\n\nfs\n  .readdirSync(__dirname)\n  .filter((file) => {\n    return (file.indexOf('.') !== 0) && \n           (file !== basename) && (file.slice(-3) === '.js');\n  })\n  .forEach((file) => {\n    const model = sequelize.import(path.join(__dirname, file));\n    db[model.name] = model;\n  });\n\nObject.keys(db).forEach((modelName) => {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\n\ndb.sequelize = sequelize;\ndb.Sequelize = Sequelize;\n\nexport default db;"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA,IAAMA,QAAQ,GAAGC,gBAAA,CAAKD,QAAL,CAAcE,UAAd,CAAjB;;AACA,IAAMC,GAAG,GAAGC,OAAO,CAACD,GAAR,CAAYE,QAAZ,GAAuBD,OAAO,CAACD,GAAR,CAAYE,QAAnC,GAA8C,aAA1D;AAEA,IAAMC,MAAM,GAAGC,kBAAA,CAAWJ,GAAX,CAAf;AAEAK,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCN,GAAzC;AAEA,IAAMO,EAAE,GAAG,EAAX;AAEA,IAAIC,SAAJ;;AACA,IAAIL,MAAM,CAACM,WAAP,KAAuB,YAA3B,EAAyC;EACvCD,SAAS,GAAG,IAAIE,qBAAJ,CACRT,OAAO,CAACD,GAAR,CAAYG,MAAM,CAACQ,gBAAnB,CADQ,EAC8BR,MAD9B,CAAZ;EAGAK,SAAS,GAAG,IAAIE,qBAAJ,CACVT,OAAO,CAACD,GAAR,CAAYY,OADF,EAEVX,OAAO,CAACD,GAAR,CAAYa,OAFF,EAGVZ,OAAO,CAACD,GAAR,CAAYc,OAHF,EAGW;IACnBC,IAAI,EAAEd,OAAO,CAACD,GAAR,CAAYgB,OADC;IAEnBC,IAAI,EAAEhB,OAAO,CAACD,GAAR,CAAYkB,OAFC;IAGnBC,OAAO,EAAE,UAHU;IAInBC,aAAa,EAAE;MACbC,GAAG,EAAE,IADQ;MAEb,UAAQ;IAFK,CAJI;IAQnBC,OAAO,EAAE;EARU,CAHX,CAAZ;AAcD,CAlBD,MAkBO;EACLd,SAAS,GAAG,IAAIE,qBAAJ,CACTP,MAAM,CAACoB,QADE,EACQpB,MAAM,CAACqB,QADf,EACyBrB,MAAM,CAACsB,QADhC,EAC0CtB,MAD1C,CAAZ;AAGD;;AAEDuB,cAAA,CACGC,WADH,CACeC,SADf,EAEGC,MAFH,CAEU,UAACC,IAAD,EAAU;EAChB,OAAQA,IAAI,CAACC,OAAL,CAAa,GAAb,MAAsB,CAAvB,IACCD,IAAI,KAAKjC,QADV,IACwBiC,IAAI,CAACE,KAAL,CAAW,CAAC,CAAZ,MAAmB,KADlD;AAED,CALH,EAMGC,OANH,CAMW,UAACH,IAAD,EAAU;EACjB,IAAMI,KAAK,GAAG1B,SAAS,UAAT,CAAiBV,gBAAA,CAAKqC,IAAL,CAAUP,SAAV,EAAqBE,IAArB,CAAjB,CAAd;EACAvB,EAAE,CAAC2B,KAAK,CAACE,IAAP,CAAF,GAAiBF,KAAjB;AACD,CATH;;AAWAG,MAAM,CAACC,IAAP,CAAY/B,EAAZ,EAAgB0B,OAAhB,CAAwB,UAACM,SAAD,EAAe;EACrC,IAAIhC,EAAE,CAACgC,SAAD,CAAF,CAAcC,SAAlB,EAA6B;IAC3BjC,EAAE,CAACgC,SAAD,CAAF,CAAcC,SAAd,CAAwBjC,EAAxB;EACD;AACF,CAJD;AAMAA,EAAE,CAACC,SAAH,GAAeA,SAAf;AACAD,EAAE,CAACG,SAAH,GAAeA,qBAAf;eAEeH,E"}