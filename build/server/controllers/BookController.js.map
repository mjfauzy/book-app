{"version":3,"file":"BookController.js","names":["util","Util","BookController","req","res","BookService","getAllBooks","allBooks","length","setSuccess","send","setError","body","title","price","description","newBook","addBook","createdBook","message","alteredBook","id","params","Number","updateBook","updatedBook","getABook","theBook","deleteBook","bookToDelete"],"sources":["../../../api/server/controllers/BookController.js"],"sourcesContent":["import BookService from '../services/BookService';\r\nimport Util from '../utils/Utils';\r\n\r\nconst util = new Util();\r\n\r\nclass BookController {\r\n\tstatic async getAllBooks(req, res) {\r\n\t\ttry {\r\n\t\t\tconst allBooks = await BookService.getAllBooks();\r\n\t\t\tif(allBooks.length > 0) {\r\n\t\t\t\tutil.setSuccess(200, 'Books retrieved', allBooks);\r\n\t\t\t} else {\r\n\t\t\t\tutil.setSuccess(200, 'No book found');\r\n\t\t\t}\r\n\r\n\t\t\treturn util.send(res);\r\n\t\t} catch (error) {\r\n\t\t\tutil.setError(400, error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic async addBook(req, res) {\r\n\t\tif (!req.body.title || !req.body.price || !req.body.description) {\r\n\t\t\tutil.setError(400, 'Please provide complete details.');\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\r\n\t\tconst newBook = req.body;\r\n\t\ttry {\r\n\t\t\tconst createdBook = await BookService.addBook(newBook);\r\n\t\t\tutil.setSuccess(201, 'Book Added!', createdBook);\r\n\t\t\treturn util.send(res);\r\n\t\t} catch (error) {\r\n\t\t\tutil.setError(400, error.message);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic async updatedBook(req, res) {\r\n\t\tconst alteredBook = req.body;\r\n\t\tconst { id } = req.params;\r\n\t\tif (!Number(id)) {\r\n\t\t\tutil.setError(400, 'Please input a valid numeric value.');\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tconst updatedBook = await BookService.updateBook(id, alteredBook);\r\n\t\t\tif (!updatedBook) {\r\n\t\t\t\tutil.setError(404, `Cannot find book with the id: ${id}`);\r\n\t\t\t} else {\r\n\t\t\t\tutil.setSuccess(200, 'Book updated!', updatedBook);\r\n\t\t\t}\r\n\t\t\treturn util.send(res);\r\n\t\t} catch (error) {\r\n\t\t\tutil.setError(400, error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic async getABook(req, res) {\r\n\t\tconst { id } = req.params;\r\n\t\tif (!Number(id)) {\r\n\t\t\tutil.setError(400, 'Please input a valid numeric value.');\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tconst theBook = await BookService.getABook(id);\r\n\r\n\t\t\tif (!theBook) {\r\n\t\t\t\tutil.setError(404, `Cannot find book with the id: ${id}`);\r\n\t\t\t} else {\r\n\t\t\t\tutil.setSuccess(200, 'Found book', theBook);\r\n\t\t\t}\r\n\t\t\treturn util.send(res);\r\n\t\t} catch (error) {\r\n\t\t\tutil.setError(400, error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic async deleteBook(req, res) {\r\n\t\tconst { id } =  req.params;\r\n\t\tif (!Number(id)) {\r\n\t\t\tutil.setError(400, 'Please input a valid numeric value.');\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tconst bookToDelete = await BookService.deleteBook(id);\r\n\r\n\t\t\tif (bookToDelete) {\r\n\t\t\t\tutil.setSuccess(200, 'Book deleted');\r\n\t\t\t} else {\r\n\t\t\t\tutil.setError(404, `Book with the id ${id} cannot be found`);\r\n\t\t\t}\r\n\t\t\treturn util.send(res);\r\n\t\t} catch (error) {\r\n\t\t\tutil.setError(400, error);\r\n\t\t\treturn util.send(res);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default BookController;"],"mappings":"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"}